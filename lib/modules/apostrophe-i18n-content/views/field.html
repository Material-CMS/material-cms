{# Based on color-picker pattern from Apostrophe documentation #}
{%- import "apostrophe-schemas:macros.html" as schemas -%}

{# Macro for multilingual string field content #}
{% macro multilingualString(data) %}
  {# Debug: ensure locales exist #}
  {% set locales = data.locales or ['en'] %}
  {% set defaultLocale = data.defaultLocale or locales[0] %}
  <div class="apos-field" data-multilingual-string>
    {% for locale in locales %}
      <div class="apos-field" data-locale="{{ locale }}">
        <label class="apos-field-label">
          {% if locale === defaultLocale %}
            <span class="apos-label">DEFAULT</span><br>
          {% endif %}
          <span class="apos-label">{{ locale|upper }}:</span>
          <input
            type="text"
            class="apos-field-input"
            data-locale-input="{{ locale }}"
            placeholder="{{ __ns('apostrophe', 'Translation for') }} {{ locale }}"
          />
        </label>
      </div>
    {% endfor %}
    <input type="hidden" name="{{ data.name }}" value="" data-multilingual-value />
  </div>
{% endmacro %}

{# Wrap in standard fieldset #}
{{ schemas.fieldset(data, multilingualString) }}