<div class="slider fullscreen"
  {% if data.widget.sliderHalf %}
    style="height: 50vh"
  {%- endif -%}
  >
  <ul class="slides">

    {% block items %}

      {% for entry in data.widget._pieces %}
        {% set image = entry.item or entry %}
        {% set relationship = entry.relationship %}

        <li>
          <div class="gradient-overlay">
            <img data-image
              src="{{ apos.attachments.url(image.attachment, { size: data.options.size or 'full', crop: relationship }) }}"
              srcset="{{ apos.images.srcset(image.attachment, relationship) }}"
              sizes="50vw"
              alt="{{ image.title }}"
              {% if data.widget.animated %}
                class="animated"
              {% endif %}
              {% if apos.attachments.hasFocalPoint(relationship) %}
                style="object-position: {{ apos.attachments.focalPointToBackgroundPosition(relationship) }}"
              {% endif -%}
            >
          </div>
          <div class="caption {{ image.align }}">

            {% if data.widget.title %}
              <h3 class="accent-color truncate hide-on-small-only"
                {% if image.titleColor %}
                  style="color:{{ image.titleColor }}"
                {% endif %}
              >
                {{ image.title }}
              </h3>
            {% endif %}

            {% if image.description %}
              <p class="flow-text"
                {% if image.descriptionColor %}
                  style="color:{{ image.descriptionColor }}"
                {% endif %}
              >
                {{ image.description | nlbr }}
              </p>
            {% endif %}

          </div>

          {% if image.credit %}
            <div class="credit">
              {% if image.creditUrl %}
                  <a href="{{ image.creditUrl }}" target="_blank">
              {% endif %}
                    <span>{{ image.credit }}</span>
              {% if image.creditUrl %}
                  </a>
              {% endif %}
          </div>
          {% endif %}

        </li>

      {% endfor %}
    {% endblock %}



  </ul>
</div>

{% if data.widget.sliderHalf %}
<div class="main-content">
  <div class="container">

    <div class="widgets-container">

      {% if data.widget.header %}
        <h1 class="section-header
          {% if data.widget.headerAlign == 'left' %}
            left-align
          {% elif data.widget.headerAlign == 'center' %}
            center-align
          {% elif data.widget.headerAlign == 'right' %}
            right-align
          {% endif %}
        ">
          {{ data.widget.header }}
        </h1>
      {% endif %}

      {{ apos.area(data.widget, 'sliderExtra', {
        limit: 3,
        widgets: {
          'events': {
            controls: {
              cloneable: false,
              removable: true,
              position: 'top-right'
            }
          },
          'texts': {
            controls: {
              cloneable: false,
              removable: true,
              position: 'top-right'
            }
          },
          'texts-carousels': {
            controls: {
              cloneable: false,
              removable: true,
              position: 'top-right'
            }
          },
          'video': {
            controls: {
              cloneable: false,
              removable: true,
              position: 'top-right'
            }
          }
        }
      }) }}
    </div>

  </div>
</div>
{% endif %}

<style>
  .slider .indicators {
    bottom: {{ data.widget.indicatorsBottom }}px !important
  }
  .slider .indicators .indicator-item.active {
    background-color: {{ data.global.accentColor }}
  }
  {% if data.widget._pieces.length <= 1 %}
    .slider .indicators {
      display: none
    }
  {% endif %}
  {% if data.widget.gradientColorTop and data.widget.gradientColorBottom %}
    .gradient-overlay:after {
      background: linear-gradient({{ data.widget.gradientColorTop }}80,{{ data.widget.gradientColorBottom }}80);
      background: -webkit-linear-gradient({{ data.widget.gradientColorTop }}80, {{ data.widget.gradientColorBottom }}80);
      background: -o-linear-gradient({{ data.widget.gradientColorTop }}80, {{ data.widget.gradientColorBottom }}80);
    }
  {% endif -%}
</style>
