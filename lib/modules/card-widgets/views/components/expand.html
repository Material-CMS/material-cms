{% macro base() %}

  <div class="row widget expand">
    <div class="col s12">

      {% for entry in data.widget._pieces %}
        {% set image = entry.item or entry %}
        {% set relationship = entry.relationship %}

        <div class="expand-item expand-init expand-filter">

          <div class="radius{% if data.widget.shadow %} z-depth-1{% endif %}">
            <div class="expand-curve-wrapper">
              <a class="expand-cover z-depth-1">
                <img
                  src="{{ apos.attachments.url(image.attachment, { size: data.options.size, crop: relationship }) }}"
                  srcset="{{ apos.images.srcset(image.attachment, relationship ) }}"
                  sizes="{{ data.options.sizesAttr or '100vw' }}"
                  alt="{{ image.title }}"
                  {%- if apos.attachments.hasFocalPoint(relationship) -%}
                    style="object-position: {{ apos.attachments.focalPointToBackgroundPosition(relationship) }}"
                  {%- endif -%}
                >
              </a>

              {% if image.description %}
                <div class="expand-header">
                  <p class="flow-text text-color">
                    {{ image.description | nlbr }}
                  </p>
                </div>
              {% endif %}

                <div class="expand-body radius z-depth-1">
                  <div class="expand-container">
                  <div class="row widget">
                    <div class="col s12">
                      {{ apos.area(data.widget, 'expandWidgets', {
                        widgets: {
                          'double': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'bottom-right'
                						}
                					},
                					'events': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'top-right'
                						}
                					},
                					'grid': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'bottom-right'
                						}
                					},
                					'people': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'top-right'
                						}
                					},
                					'swiper': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'top-right'
                						}
                					},
                					'texts': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'top-right'
                						}
                					},
                					'tables': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'top-right'
                						}
                					},
                					'video': {
                						controls: {
                							cloneable: false,
                							removable: true,
                							position: 'top-right'
                						}
                					}
                				}
                      }) }}
                    </div>
                  </div>
                  </div>
                </div>

            </div>
          </div>

        </div>

      {% endfor %}

    </div>
  </div>

{% endmacro %}
