<div class="nav">
  <nav>
    <div class="nav-wrapper z-depth-2">
      <a href="{{ data.page._url }}" class="brand-logo"><h1 class="accent-color">{{ data.page.title }}</h1></a>
      <a class="accent-color sidenav-trigger" href="#" data-target="mobile"><i class="material-icons">menu</i></a>
      <ul class="nav-activator right hide-on-med-and-down">

        {% for piece in data.widget._pieces %}
          <li><a class="accent-color flow-text scroll" href="#{{ piece.slug }}">{{ piece.title }}</a></li>
        {% endfor %}

      </ul>
    </div>
  </nav>
  <ul class="sidenav" id="mobile">

    {% for piece in data.widget._pieces %}
      <li><a class="accent-color flow-text scroll" href="#{{ piece.slug }}">{{ piece.title }}</a></li>
    {% endfor %}

  </ul>
</div>

<div class="section-wrapper">

  {% for piece in data.widget._pieces %}

    <div class="section"
      id="{{ piece.slug }}"
      {%- if piece._image.attachment  -%}
        style="background-image: url({{ apos.attachments.url(piece._image.attachment, { size: data.options.size or 'full' }) }})"
      {%- elif piece.color -%}
        style="background-color:{{ piece.color }}"
      {% endif %}
    >
      {# Slide #}
      {%- if piece.preferences == 'slideOn' -%}
        <div class="slide-content">
          {{ apos.singleton(piece, 'sl', 'slides', {
            limit: 1,
            addLabel: 'Add Slide',
            editLabel: 'Change Slide',
            controls: {
              movable: false,
              removable: true,
              position: 'top-right'
            }
          }) }}
        </div>

      {# Footer #}
      {%- elif piece.preferences == 'footerOn' -%}
        {%- if piece.title -%}
          <div class="header">
            <h3 class="accent-color"
              {%- if piece.titleColor -%}
                style="color:{{ piece.titleColor }}"
              {% endif %}
            >
              {{ piece.title }}
            </h3>
          </div>
        {%- endif -%}
        <div class="bottom-content">
          {% include "footer-widgets:widget.html" %}
        </div>

      {# Main Widgets #}
      {%- else -%}
        <div class="main-content container">

          {%- if piece.title -%}
            <div class="header">
              <h3 class="accent-color"
                {%- if piece.titleColor -%}
                  style="color:{{ piece.titleColor }}"
                {% endif %}
              >
                {{ piece.title }}
              </h3>
            </div>
          {%- endif -%}

          {{ apos.area(piece, 'a', {
            limit: 2,
            widgets: {
              'card': {
               minSize: [ 700, 350 ],
               aspectRatio: [ 2, 1 ],
               size: 'full',
                controls: {
                  removable: true,
                  position: 'top-right'
                }
              },
              'double': {
                controls: {
                  movable: false,
                  removable: true,
                  position: 'top-right'
                }
              },
              'events': {
                controls: {
                  movable: false,
                  removable: true,
                  position: 'top-right'
                }
              },
              'texts': {
                controls: {
                  movable: false,
                  removable: true,
                  position: 'top-right'
                }
              },
              'video': {
                controls: {
                  movable: false,
                  removable: true,
                  position: 'top-right'
                }
              }
            }
          }) }}
        </div>
      {% endif %}

    </div>
  {% endfor %}

</div>
