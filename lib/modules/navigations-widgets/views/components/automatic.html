{% macro base(dataTarget, dropdown, classes) %}
  {# Home #}
  <li class="
      {% if data.widget.navLightHover or data.global.navLightHover %}light-hover{% else %}dark-hover{% endif %}
      {% if data.options.pageUrl == data.options.homeUrl %} active{% endif %}
  ">
    <a href="{{ data.options.homeUrl }}" data-target="{{ dataTarget }}" class="flow-text
      {% if data.options.pageUrl == data.options.homeUrl and data.options.items %}
        {{ dropdown }}
      {% endif %}"
      {% if data.widget.navTextColor or data.global.navTextColor %}
        style="color: {{ data.widget.navTextColor or data.global.navTextColor }}"
      {% endif %}
    >

      {{ data.options.homeTitle }}

      {% if data.options.pageUrl == data.options.homeUrl and data.options.items %}
        <i class="material-icons left">arrow_drop_down</i>
      {% endif %}
    </a>

    {# Sections of Home Loop Dropdown #}
    {% if data.options.pageUrl == data.options.homeUrl %}
      <ul class="dropdown-content nav-color" id="{{ dataTarget }}"
      {% if data.widget.navColor %}
        style="background-color: {{ data.widget.navColor }};"
      {% endif %}
      >

        {% for piece in data.options.pieces %}
          <li>
            <a href="#{{ piece.slug }}" class="accent-color flow-text anchor-jump anchor-scroll truncate {{ classes }}"
              {% if data.widget.navTextColor or data.global.navTextColor %}
                style="color: {{ data.widget.navTextColor or data.global.navTextColor }}"
              {% endif %}
            >
              {{ piece.title }}
            </a>
          </li>
        {% endfor %}

      </ul>
    {% endif %}

  </li>

  {# Tabs Loop #}
  {% for tab in data.options.homeChildren %}
    <li class="
          {% if data.widget.navLightHover or data.global.navLightHover %}light-hover{% else %}dark-hover{% endif %}
          {% if data.options.pageUrl == tab._url  %} active{% endif %}
    ">
      <a href="{{ tab._url }}" data-target="{{ tab._id }}-{{ dataTarget }}" class="flow-text
        {% if tab._children.length %}
          {{ dropdown }}
        {% endif %}"
        {% if data.widget.navTextColor or data.global.navTextColor %}
          style="color: {{ data.widget.navTextColor or data.global.navTextColor }}"
        {% endif %}
      >
        {{ tab.title }}
        {% if tab._children.length %}
          <i class="material-icons left">arrow_drop_down</i>
        {% endif %}
      </a>

      {# Dropdown #}
      {% if (data.options.pageUrl == tab._url and data.options.items) or tab._children.length %}
        <ul id="{{ tab._id }}-{{ dataTarget }}"
          class="nav-color dropdown-content
            {% if data.widget.navLightHover or data.global.navLightHover %} light-hover{% else %} dark-hover{% endif %}
          "
          {% if data.widget.navColor %}
            style="background-color: {{ data.widget.navColor }};"
          {% endif %}
        >

          {# Sections of Tabs Loop Dropdown #}
          {% if data.options.pageUrl == tab._url and data.options.items %}
            {% for piece in data.options.pieces %}
              <li>
                <a href="#{{ piece.slug }}" class="accent-color flow-text anchor-jump anchor-scroll truncate {{ classes }}"
                  {% if data.widget.navTextColor or data.global.navTextColor %}
                    style="color: {{ data.widget.navTextColor or data.global.navTextColor }}"
                  {% endif %}
                >
                  {{ piece.title }}
                </a>
              </li>
            {% endfor %}
            <li class="divider" tabindex="-1"></li>
          {% endif %}

          {# Children of Tabs Loop Dropdown #}
          {% for child in tab._children %}
            <li
              {% if data.options.pageUrl == child._url %}
                class="active"
              {% endif %}
            >
              <a href="{{ child._url }}" class="accent-color flow-text truncate"
                {% if data.widget.navTextColor or data.global.navTextColor %}
                  style="color: {{ data.widget.navTextColor or data.global.navTextColor }}"
                {% endif %}
              >
                {{ child.title }}
              </a>
            </li>

            {# Sections of Children of Tabs Dropdown Loop #}
            {% if data.options.pageUrl == child._url and data.options.items %}
              <li class="divider" tabindex="-1"></li>
              {% for piece in pieces %}
                <li>
                  <a href="#{{ piece.slug }}" class="accent-color flow-text anchor-jump anchor-scroll truncate {{ classes }}"
                    {% if data.widget.navTextColor or data.global.navTextColor %}
                      style="color: {{ data.widget.navTextColor or data.global.navTextColor }}"
                    {% endif %}
                  >
                    {{ piece.title }}
                  </a>
                </li>
              {% endfor %}
            {% endif %}

          {% endfor %}

        </ul>
      {% endif %}

    </li>
  {% endfor %}
{% endmacro %}
