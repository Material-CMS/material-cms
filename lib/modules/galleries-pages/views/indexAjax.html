<div data-apos-ajax-append>

  {% for piece in data.pieces %}
    <div class="card z-depth-0"
        {% if piece.backColor%}
          style="background-color:{{ piece.backColor }}"
        {% endif %}
      >

      <div class="card-content no-padding-mobile" style="
        {% if piece.backColor%}
          background-color:{{ piece.backColor }}
        {% endif %}
      ">

        <div class="row">
          <div class="col s12 m12">

            <div class="gallery">

              <div class="title">
                <a href="{{ piece._url }}">
                  <h3 class="accent-color" style="
                    {% if piece.titleColor %}
                      color:{{ piece.titleColor }}
                    {% endif %}
                    {% if piece.titleCenter %}
                      text-align: center;
                    {% endif %}
                  ">
                    {{ piece.title }}
                  </h3>
                </a>
              </div>

              <div class="images" style="
                {% if piece.columnCount == '5' %}
                  column-count: 5;
                {% elif piece.columnCount == '4' %}
                  column-count: 4;
                {% elif piece.columnCount == '3' %}
                  column-count: 3;
                {% else %}
                  column-count: 5;
                {% endif %}
              ">

                {% for _image in piece._images %}
                  <div class="images-container">
                    <div class="radius
                      {% if data.page.shadow == true %}
                        z-depth-2
                      {% endif %}
                    ">
                      <div class="card">

                        <div class="card-image">
                          <img
                            src="{{ apos.attachments.url(_image.attachment, { size: data.options.size or 'one-third' }) }}"
                            data-featherlight="{{ apos.attachments.url(_image.attachment, { size: data.options.size or 'full' }) }}"
                            alt="{{ _image.description or _image.title }}"
                            width="100%"
                          >
                        </div>

                        {% if _image.description and piece.columnCount == '3' %}
                          <div class="card-content">
                            <p class="flow-text"
                              {% if image.descriptionColor %}
                                style="color:{{ _image.descriptionColor }}"
                              {% endif %}
                            >
                              {{ _image.description }}
                            </p>
                          </div>
                        {% endif %}

                        {% if _image.credit and piece.columnCount == '3' %}
                          <div class="card-action center-align flow-text">
                            {% if _image.creditUrl %}
                                <a class="btn-flat" href="{{ _image.creditUrl }}">
                            {% endif %}
                                  <p>{{ _image.credit }}</p>
                            {% if _image.creditUrl %}
                                </a>
                            {% endif %}
                          </div>
                        {% endif %}

                      </div>
                    </div>
                  </div>
                {% endfor %}

              </div>

            </div>

          </div>
        </div>

      </div>
    </div>
  {% endfor %}

</div>

{% if data.currentPage < data.totalPages %}
  <a data-apos-ajax-infinite-scroll href="{{ data.url | build({ page: data.currentPage + 1, append: 1 }) }}">Load More...</a>
{% endif %}
