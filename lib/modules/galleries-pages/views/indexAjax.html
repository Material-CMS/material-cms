<div data-apos-ajax-append>

  {% for piece in data.pieces %}
    <div class="gallery">

      <div class="header">
        <a href="{{ piece._url }}">
          <h3 class="accent-color" style="
            {%- if piece.headerColor -%}
              color:{{ piece.headerColor }}
            {% endif %}
            {%- if piece.headerCenter -%}
              text-align: center;
            {% endif %}
          ">
            {{ piece.title }}
          </h3>
        </a>
      </div>

      <div class="images" style="
        {%- if piece.columnCount == '5' -%}
          column-count: 5;
        {%- elif piece.columnCount == '4' -%}
          column-count: 4;
        {%- elif piece.columnCount == '3' -%}
          column-count: 3;
        {% else %}
          column-count: 5;
        {% endif %}
      ">
        {% for _image in piece._images %}
        <div class="card" data-featherlight="{{ apos.attachments.url(_image.attachment, { size: data.options.size or 'full' }) }}">
          <div class="card-image">
            <img
              src="{{ apos.attachments.url(_image.attachment, { size: data.options.size or 'one-third' }) }}"
              alt="{{ _image.description or _image.title }}" width="100%"
            >
          </div>
          {%- if _image.description -%}
            <div class="card-content">
              <p class="flow-text">{{ _image.description }}</p>
            </div>
          {%- endif -%}
        </div>
        {% endfor %}
      </div>

    </div>
  {% endfor %}

</div>

{% if data.currentPage < data.totalPages %}
  <a data-apos-ajax-infinite-scroll href="{{ data.url | build({ page: data.currentPage + 1, append: 1 }) }}">Load More...</a>
{% endif %}
